System.register(["jimu-core","jimu-ui","jimu-ui/advanced/setting-components","jimu-core/react","jimu-theme"],(function(e,t){var n={},s={},i={},l={},a={};return{setters:[function(e){n.Immutable=e.Immutable,n.LinkType=e.LinkType,n.React=e.React,n.css=e.css,n.defaultMessages=e.defaultMessages,n.jsx=e.jsx},function(e){s.Checkbox=e.Checkbox,s.Switch=e.Switch,s.TextInput=e.TextInput,s.defaultMessages=e.defaultMessages,s.hooks=e.hooks},function(e){i.JimuMapViewSelector=e.JimuMapViewSelector,i.LinkSelector=e.LinkSelector,i.OpenTypes=e.OpenTypes,i.SearchDataSetting=e.SearchDataSetting,i.SearchDataType=e.SearchDataType,i.SearchGeneralSetting=e.SearchGeneralSetting,i.SearchServiceType=e.SearchServiceType,i.SearchSuggestionSetting=e.SearchSuggestionSetting,i.SettingCollapse=e.SettingCollapse,i.SettingRow=e.SettingRow,i.SettingSection=e.SettingSection},function(e){l.default=e.default},function(e){a.useTheme=e.useTheme}],execute:function(){e((()=>{var e={8891:e=>{"use strict";e.exports=n},1315:e=>{"use strict";e.exports=l},4796:e=>{"use strict";e.exports=a},726:e=>{"use strict";e.exports=s},7756:e=>{"use strict";e.exports=i}},t={};function o(n){var s=t[n];if(void 0!==s)return s.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,o),i.exports}o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.p="";var r={};return o.p=window.jimuConfig.baseUrl,(()=>{"use strict";o.r(r),o.d(r,{default:()=>h});var e,t,n,s=o(8891),i=o(726),l=o(7756),a=o(1315);!function(e){e.ResultPanel="Result_Panel",e.OtherWidgets="Other_Widgets"}(e||(e={})),function(e){e.Style1="Style1",e.Style2="Style2"}(t||(t={})),function(e){e.None="",e.Init="init",e.Loading="loading",e.Loaded="loaded",e.Warning="warning",e.Error="error"}(n||(n={}));const c={searchResult:"Search result",arrangementStyle:"Arrangement style",showSearchResult:"Show search results in",resultPanel:"Result panel",otherWidgets:"Other widgets",autoSelect:"Auto select the first result",redirectSearchResult:"Redirect if search result is not empty",notSetCorrectle:"The search or display field is not set correctly.",selectedField:"{fieldNumber} Selected",searchExample:"Example: {url}",locatorSourceErrorHint:"The URL you entered is invalid or inaccessible",locatorUrlError:"Locator URL is not set correctly",maximumResults:"Maximum display results per source",outputDsLabel:"{label} result",searchBoxTip:"Search box",searchIconTip:"Search icon"};var u=o(4796);const g=t=>{const n=i.hooks.useTranslate(c,i.defaultMessages,s.defaultMessages),a=(0,u.useTheme)(),o=s.css`
    .check-box-label {
      color: ${a.colors.palette.dark[800]}
    }
    .search-setting-con {
      padding-left: 0;
      padding-right: 0;
    }
    .divider-line {
      padding-bottom: 0;
    }
    .checkbox-con .jimu-widget-setting--row-label{
      max-width: 100%;
    }
  `,{config:r,id:g,useDataSources:d,onSettingChange:S}=t,{searchResultView:h,hint:p,resultMaxNumber:x,linkParam:f,isAutoSelectFirstResult:m}=r,[j,y]=s.React.useState(!1),[v,b]=s.React.useState(!1),[C,w]=s.React.useState(x),[R,T]=s.React.useState((0,s.Immutable)({}));s.React.useEffect((()=>{k()}),[r]);const k=()=>{const e={maxSuggestions:null==r?void 0:r.maxSuggestions,isUseCurrentLoation:null==r?void 0:r.isUseCurrentLoation,isShowRecentSearches:null==r?void 0:r.isShowRecentSearches,recentSearchesMaxNumber:null==r?void 0:r.recentSearchesMaxNumber};T((0,s.Immutable)(e))},O=(e,t)=>{S({id:g,config:r.setIn(e,t)})},I=e=>0===(null==e?void 0:e.length)||Number(e)&&Number(e)>0;return(0,s.jsx)(l.SettingSection,{title:n("generalSearchOption"),css:o},(0,s.jsx)(l.SearchGeneralSetting,{id:g,hint:p,onSettingChange:e=>{O(["hint"],e)}}),(0,s.jsx)("div",null,(0,s.jsx)(l.SettingSection,{className:"search-setting-con"},(0,s.jsx)(l.SettingRow,null,(0,s.jsx)(l.SettingCollapse,{label:n("searchSuggestion"),isOpen:j,onRequestOpen:()=>y(!0),onRequestClose:()=>y(!1),level:1},(0,s.jsx)(l.SearchSuggestionSetting,{id:g,settingConfig:R,onSettingChange:e=>{if(!e)return!1;const t=r.merge(e);S({id:g,config:t})}})))),j&&(0,s.jsx)(l.SettingSection,{className:"divider-line"})),(0,s.jsx)(l.SettingRow,null,(0,s.jsx)(l.SettingCollapse,{label:n("searchResult"),isOpen:v,onRequestOpen:()=>b(!0),onRequestClose:()=>b(!1),level:1},(0,s.jsx)(l.SettingRow,{label:n("resultPanel"),className:"mt-2"},(0,s.jsx)(i.Switch,{checked:h===e.ResultPanel,onChange:t=>{(t=>{const n=t?e.ResultPanel:e.OtherWidgets;O(["searchResultView"],n)})(h===e.OtherWidgets)}})),h===e.ResultPanel&&(0,s.jsx)(l.SettingRow,{flow:"wrap",className:"checkbox-con",label:n("maximumResults")},(0,s.jsx)(i.TextInput,{size:"sm",value:C,onChange:e=>{const t=e.target.value;I(t)&&w(t)},onAcceptValue:e=>{e||w(e=x||6),I(e)&&O(["resultMaxNumber"],Number(e))},className:"w-100"})),h===e.ResultPanel&&(0,s.jsx)(l.SettingRow,null,(0,s.jsx)(i.Checkbox,{checked:m,onClick:e=>{const t=e.currentTarget;t&&O(["isAutoSelectFirstResult"],t.checked)},className:"mr-1","aria-label":n("autoSelect")}),(0,s.jsx)("span",{className:"check-box-label"},n("autoSelect"))),h===e.OtherWidgets&&(0,s.jsx)(l.SettingRow,{className:"d-block",flow:"wrap",label:n("redirectSearchResult")},(0,s.jsx)(l.LinkSelector,{onSettingConfirm:e=>{e&&O(["linkParam"],e)},linkParam:f,useDataSources:d,widgetId:g,hiddenLinks:(0,s.Immutable)([s.LinkType.WebAddress,s.LinkType.PrintPreview]),openTypes:(0,s.Immutable)([l.OpenTypes.CurrentWindow])})))))},{useState:d,useEffect:S}=a.default,h=e=>{const{config:t,id:n,portalUrl:a,onSettingChange:o,useDataSources:r}=e,[c,u]=d(null),[h,p]=d(null),[x,f]=d(null),[m,j]=d(null),[y,v]=d(null),b=s.css`
    .suggestion-setting-con  {
      padding-bottom: 0;
    }
  `,C=e=>{var t;const n=[];return null===(t=null==e?void 0:e.datasourceConfig)||void 0===t||t.forEach((e=>{(null==e?void 0:e.searchServiceType)===l.SearchServiceType.GeocodeService&&n.push(null==e?void 0:e.useUtility)})),n};return S((()=>{console.log(123);let t=e.config.services;u(e.config.SysCacheWindow),p(e.config.ConfigInit),f(t[0].url),j(t[1].url),v(t[2].url)}),[]),(0,s.jsx)("div",{className:"widget-setting-search jimu-widget-search",css:b},(0,s.jsx)(l.SearchDataSetting,{id:n,portalUrl:a,useDataSources:r,createOutputDs:!0,onSettingChange:e=>{if(!e)return!1;const s=null==t?void 0:t.setIn(["datasourceConfig"],e);o({id:n,config:s})},onOutputDsSettingChange:(e,s)=>{if(!s)return!1;const i=null==t?void 0:t.setIn(["datasourceConfig"],s);o({id:n,config:i,useUtilities:C(i)},e)},datasourceConfig:null==t?void 0:t.datasourceConfig,searchDataSettingType:l.SearchDataType.Both}),(0,s.jsx)(g,{id:n,config:t,onSettingChange:o,useDataSources:r}),(0,s.jsx)(l.SettingSection,null,(0,s.jsx)(l.SettingRow,null,(0,s.jsx)(l.JimuMapViewSelector,{onSelect:t=>{e.onSettingChange({id:e.id,useMapWidgetIds:t})},useMapWidgetIds:e.useMapWidgetIds})),(0,s.jsx)(l.SettingRow,null,(0,s.jsx)("div",{style:{display:"flex",flexDirection:"column",width:"100%"}},(0,s.jsx)("label",{style:{justifyContent:"left"}},"Cache window"),(0,s.jsx)(i.TextInput,{value:c,onChange:t=>(t=>{u(t);let n=Object.assign({},e.config);n.SysCacheWindow=t,e.onSettingChange({id:e.id,config:n})})(t.target.value),style:{height:"26px"},placeholder:"Nhập url..."}))),(0,s.jsx)(l.SettingRow,null,(0,s.jsx)("div",{style:{display:"flex",flexDirection:"column",width:"100%"}},(0,s.jsx)("label",{style:{justifyContent:"left"}},"Config init"),(0,s.jsx)(i.TextInput,{value:h,onChange:t=>(t=>{p(t);let n=Object.assign({},e.config);n.ConfigInit=t,e.onSettingChange({id:e.id,config:n})})(t.target.value),style:{height:"26px"},placeholder:"Nhập url..."}))),(0,s.jsx)(l.SettingRow,null,(0,s.jsx)("div",{style:{display:"flex",flexDirection:"column",width:"100%"}},(0,s.jsx)("label",{style:{justifyContent:"left"}},"MapServer url"),(0,s.jsx)(i.TextInput,{value:x,onChange:t=>(t=>{f(t);let n=Object.assign({},e.config);n.services[0].url=t,e.onSettingChange({id:e.id,config:n})})(t.target.value),style:{height:"26px"},placeholder:"Nhập url..."}))),(0,s.jsx)(l.SettingRow,null,(0,s.jsx)("div",{style:{display:"flex",flexDirection:"column",width:"100%"}},(0,s.jsx)("label",{style:{justifyContent:"left"}},"FeatureServer url"),(0,s.jsx)(i.TextInput,{value:m,onChange:t=>(t=>{j(t);let n=Object.assign({},e.config);n.services[1].url=t,e.onSettingChange({id:e.id,config:n})})(t.target.value),style:{height:"26px"},placeholder:"Nhập url..."}))),(0,s.jsx)(l.SettingRow,null,(0,s.jsx)("div",{style:{display:"flex",flexDirection:"column",width:"100%"}},(0,s.jsx)("label",{style:{justifyContent:"left"}},"Category url"),(0,s.jsx)(i.TextInput,{value:y,onChange:t=>(t=>{v(t);let n=Object.assign({},e.config);n.services[2].url=t,e.onSettingChange({id:e.id,config:n})})(t.target.value),style:{height:"26px"},placeholder:"Nhập url..."})))))}})(),r})())}}}));